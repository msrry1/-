# 线性表顺序存储

> **结构代码**

~~~c
json
#define MAXSIZE 20					//宏定义改变初始分配量
typedef int ElemType;				//全局改变线性表存储类型
typedef struct
{
    ElemType data[MAXSIZE];			//数组，存储数据元素
    int lengh;						//线性表的当前长度
}Sqlist;
~~~



---

第 ***i*** 个数据元素 ***ai*** 存储地址可由 ***a1***表示

>
>
>**LOC(ai) = LOC(a1) + (i-1)* c**

### 获取数据元素 

获取第 ***i*** 个位置元素的值

~~~c
json
/*初始条件：顺序线性表 L 已存在，1 <= i <=ListLength(L) */
/*操作结果：用 e 返回 L 中第 i 个元素的值， i 为位置，第 1 个位置是a[0]*/
int GetElem(Sqlist L,int i,int *e)
{
    if(L.length == 0 || i < 1 || i > L.lengh)	//if 获取的位置过小或过大或L的长度为0，返回0
    {
        return 0;
    }
    *e = L.data[i-1];			//返回第 i 个位置的值给 e 
    
    return 1;
}
~~~

### 插入操作

在线性表第 ***i*** 个位置插入 ***e***

1. 插入位置不合理时抛出异常
2. 线性表长度大于等于数组长度时抛出异常或动态增加容量
3. 从最后一个元素开始向前遍历到第 ***i***  个位置，分别将它们都向后移动一个位置
4. 将要插入的元素填到位置 ***i*** 处
5. 表长加1

~~~c
json
/*初始条件：顺序线性表 L 已存在，1 <= i <= ListLength(L)	*/
/*操作结果：在 L 中第 i 个之前插入新的数据元素 e ，L 的长度加1	*/
int ListInsert(Sqlist *L,int i,int e)
{
    int k;
    if (L->length == MAXSIZE)			//顺序线性表已满
    {
        return 0;
    }
    if (i < 1 || i > L->length + 1)		//插入位置小于第一个或大于最后一个的后一个
    {
        return 0;
    }
    if (i <= L->length)					//若插入的位置不在表尾
    {
        for (k = L->length - 1;k >= i - 1;k--)		//将要插入位置后的元素向后移一位
        {
            L->data[k+1] = L->data[k];
        }
    }
    L->data[i-1] = e;
    L->length++;
    
    return 1;
}
    
~~~



### 删除操作

删除第 ***i*** 个数据元素并用 ***e*** 返回其值

1. 如果删除位置不合理，抛出异常
2. 取出删除元素
3. 从删除元素位置开始遍历到最后一个元素位置，分别将它们都向前移动一个位置
4. 表长减1

~~~c
json
/*初始条件：L 已存在，1 <= i <= ListLength(L)	*/
/*操作结果：删除 L 的第 i 个数据元素，并用 e 返回其值，表长-1	*/
int Listdelete(Sqlist *L,int i,int *e)
{
    int k;
    if (L->length == 0 || i < 1 || i > L->length)
    {
        return 0;
    }
    *e = L->data[i-1];
    if (L->length)						//如果删除的不是最后位置
    {
        for (k = i;k < L->length;k++) 	//将删除位置后继元素前移
        {
            L->data[k-1] = L->data[k];
        }
    }
    L->length--;
    
    return 1;
}

~~~



>
>
>存储 o(1)
>
>读取 o(1)
>
>插入 o(n)
>
>删除 o(n)

- 优点：
  - 无须增加额外存储空间
  - 快速存取表中任意位置元素 
- 缺点：
  - 插入和删除操作复杂度高
  - 当线性表长度变化较大时，难以确定存储空间的容量
  - 造成存储空间“碎片”